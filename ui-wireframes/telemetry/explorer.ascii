```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                         â”‚
â”‚  Fleet Admin                           [Today | 10d | 30d | 90d | ğŸ“…]   [ğŸ‘¤]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE NAV     â”‚ TELEMETRY EXPLORER                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                                 â”‚
â”‚   Dashboard  â”‚ Telemetry Explorer                          [Insights â–¾]        â”‚
â”‚              â”‚                                                                 â”‚
â”‚   Vehicles   â”‚ KPI CARDS                                                       â”‚
â”‚   Drivers    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”â”‚
â”‚   Driver Docsâ”‚ â”‚ Records        â”‚ â”‚ Vehicles       â”‚ â”‚ Error Records  â”‚ â”‚ Avg  â”‚â”‚
â”‚   Trips      â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚Speed â”‚â”‚
â”‚ â–¶ Telemetry  â”‚ â”‚    12,458      â”‚ â”‚      87        â”‚ â”‚     312        â”‚ â”‚ 53kphâ”‚â”‚
â”‚   Alerts     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚   Alert Rulesâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   OBD Devicesâ”‚ â”‚ Avg Battery    â”‚ â”‚ Avg Motor Temp â”‚ â”‚ Avg Range      â”‚        â”‚
â”‚   SIM Cards  â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚        â”‚
â”‚   Maintenanceâ”‚ â”‚     76%        â”‚ â”‚     72Â°C       â”‚ â”‚    287 km      â”‚        â”‚
â”‚   Insurance  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   Dashcams   â”‚                                                                 â”‚
â”‚   Firmware   â”‚ FILTERS                                                         â”‚
â”‚   Analytics  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   Driver Logsâ”‚ â”‚ ğŸ” [Search by vehicle, trip ID...]                         â”‚  â”‚
â”‚   Performanceâ”‚ â”‚ Time: [After â–¾] [Before â–¾]   Has Error Codes: [All â–¾]    â”‚  â”‚
â”‚   Settings   â”‚ â”‚                                                   [Apply]  â”‚  â”‚
â”‚   Users      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   Groups &   â”‚                                                                 â”‚
â”‚   Permissionsâ”‚ TELEMETRY TABLE                                  [â–¢ Select All] â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ Time       â”‚ Vehicle   â”‚ Speedâ”‚ Batteryâ”‚ Temp â”‚ Range  â”‚ Errâ”‚ â”‚
â”‚              â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:15   â”‚ EV-9812   â”‚ 54   â”‚ 78%    â”‚ 72Â°C  â”‚ 312km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:14   â”‚ EV-1149   â”‚ 62   â”‚ 64%    â”‚ 68Â°C  â”‚ 245km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:14   â”‚ EV-4523   â”‚ 0    â”‚ 82%    â”‚ 45Â°C  â”‚ 350km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:13   â”‚ EV-6721   â”‚ 48   â”‚ 55%    â”‚ 74Â°C  â”‚ 192km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:12   â”‚ EV-3387   â”‚ 37   â”‚ 91%    â”‚ 65Â°C  â”‚ 378km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:12   â”‚ EV-8810   â”‚ 75   â”‚ 71%    â”‚ 79Â°C  â”‚ 282km  â”‚    â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 13:08:11   â”‚ EV-5431   â”‚ 0    â”‚ 67%    â”‚ 41Â°C  â”‚ 243km  â”‚ P0Aâ”‚ â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ ACTIONS                                                         â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ [View Selected] [Vehicle Snapshot] [Export Data] Page 1/50 [â—€][â–¶]â”‚ â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ INSIGHTS PANEL (Toggle)                                         â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ TOP ERROR CODES                                            â”‚  â”‚
â”‚              â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ Code â”‚ Description           â”‚ Count                   â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ P0A80â”‚ Battery voltage low   â”‚ 57                      â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ P0A1Fâ”‚ Cell balancing error  â”‚ 42                      â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ U0121â”‚ Communication lost    â”‚ 38                      â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ P0234â”‚ Engine overboost      â”‚ 29                      â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â”‚ P0562â”‚ System voltage low    â”‚ 24                      â”‚ â”‚  â”‚
â”‚              â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Guide

### Data Sources

#### KPI Cards Section
- **API Endpoint**: `GET /api/fleet/obd-telemetry/?aggregated=true`
- **Fields Used**:
  - `record_count` - Total number of telemetry records
  - `vehicle_count` - Number of vehicles with telemetry data
  - `error_record_count` - Number of records with error codes
  - `averages.speed_kph` - Average speed across all records
  - `averages.battery_percent` - Average battery level
  - `averages.motor_temp_c` - Average motor temperature
  - `averages.range_km` - Average estimated range

#### Filters
- **Search Field**:
  - **Query Parameter**: `search=<term>`
  - **Implementation**: Server-side search across vehicle identifiers and trip IDs
  - **Note**: This is the primary way to filter by vehicle or trip
  - **Supported Formats**: License plate, VIN, vehicle make/model, trip ID

- **Time Filters**:
  - **Fields**: `timestamp_after`, `timestamp_before`
  - **Format**: ISO datetime strings
  
- **Error Codes Filter**:
  - **Options**: All, With Errors, No Errors
  - **Query Parameter**: `has_error_codes=true` (when "With Errors" selected)

- **Behind the Scenes**:
  The following query parameters are still supported by the API but should be used through the search box in the UI:
  - `vehicle={id}` or `vehicle_vin={vin}` - Filter by specific vehicle
  - `trip={id}` or `trip_id={trip_id}` - Filter by specific trip

#### Telemetry Table
- **API Endpoint**: `GET /api/fleet/obd-telemetry/` with all selected filters applied
- **Columns**:
  - Checkbox for selection
  - Timestamp
  - Vehicle
  - Speed (kph)
  - Battery level (%)
  - Motor temperature (Â°C)
  - Estimated range (km)
  - Error codes (if any)

#### Insights Panel
- **API Endpoint**: `GET /api/fleet/obd-telemetry/?top_errors=true&limit=10` (with same filters)
- **Display**: Top error codes by frequency, with descriptions

#### Vehicle Snapshot
- **API Endpoint**: `GET /api/fleet/vehicles/{vehicle_id}/telemetry_data/`
- **Description**: Shows recent 20-point charts for the selected vehicle
- **Activation**: Enabled when a vehicle is selected in filters
- **Display**: Modal or in-page visualization of recent vehicle telemetry

### Interaction Flow

1. **On Page Load**:
   - Fetch aggregated telemetry data for KPI cards
   - Fetch telemetry records with default filters (e.g., last 24 hours)
   - Initialize insights panel data (collapsed by default)

2. **Filter Application**:
   - When user types in search box:
     - Search for vehicles or trips matching the term
     - Results update as user types
   - When user sets time range or error code filters and clicks Apply:
     - Update URL with query parameters
     - Reload KPI cards with new filter criteria
     - Reload telemetry table with filtered results
     - Update insights panel data with same filters

3. **Table Interactions**:
   - Click on row to navigate to telemetry detail view
   - Select checkboxes for bulk view/export
   - Sort columns by clicking headers

4. **Insights Toggle**:
   - Show/hide insights panel with error code statistics
   - Panel data uses the same filters as the main table

5. **Vehicle Focus**:
   - When arriving via vehicle detail page (`?vehicle={id}`):
     - Auto-populate search field with vehicle information
     - Show vehicle snapshot button
     - Focus KPIs and insights on that vehicle only
     - Backend still uses vehicle={id} parameter

6. **Data Management**:
   - Implement virtualized table for performance
   - Use pagination for large result sets
   - Provide export functionality for filtered data

7. **Live Data Updates**:
   - Implement polling mechanism for live data updates
   - Update KPI cards and table with fresh data
   - Respect user's current view and filters during updates
