```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                         â”‚
â”‚  Fleet Admin                           [Today | 10d | 30d | 90d | ðŸ“…]   [ðŸ‘¤]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE NAV     â”‚ CREATE ALERT RULE                                               â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                                 â”‚
â”‚   Dashboard  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ Create New Alert Rule                                      â”‚  â”‚
â”‚   Vehicles   â”‚ â”‚                                                            â”‚  â”‚
â”‚   Drivers    â”‚ â”‚ This will create a new rule to trigger alerts based on     â”‚  â”‚
â”‚   Alerts     â”‚ â”‚ specific conditions.                                       â”‚  â”‚
â–¶ Alert Rulesâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   OBD Devicesâ”‚                                                                 â”‚
â”‚   SIM Cards  â”‚ RULE SETTINGS                                                   â”‚
â”‚   Maintenanceâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   Insurance  â”‚ â”‚ Basic Information           â”‚  â”‚ Notifications & Scope     â”‚  â”‚
â”‚   Dashcams   â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚   Firmware   â”‚ â”‚ â€¢ Name:                     â”‚  â”‚ â€¢ Notification Channels:  â”‚  â”‚
â”‚   Analytics  â”‚ â”‚   [_________________________]â”‚  â”‚   [ ] Email               â”‚  â”‚
â”‚   Driver Logsâ”‚ â”‚                             â”‚  â”‚   [ ] In-App              â”‚  â”‚
â”‚   Performanceâ”‚ â”‚ â€¢ Description:              â”‚  â”‚   [ ] SMS                 â”‚  â”‚
â”‚   Settings   â”‚ â”‚   [_________________________]â”‚  â”‚                           â”‚  â”‚
â”‚   Users      â”‚ â”‚   [_________________________]â”‚  â”‚ â€¢ Recipients:             â”‚  â”‚
â”‚   Groups &   â”‚ â”‚   [_________________________]â”‚  â”‚   [_________________________]â”‚  â”‚
â”‚   Permissionsâ”‚ â”‚                             â”‚  â”‚   [+ Add Recipient]       â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Severity: [Select â–¼]      â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚   (Critical, High, Medium,  â”‚  â”‚ â€¢ Vehicle Types:          â”‚  â”‚
â”‚              â”‚ â”‚    Low)                     â”‚  â”‚   [ ] Electric            â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚   [ ] SUV                 â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ System: [Select â–¼]        â”‚  â”‚   [ ] Sedan               â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚   [ ] Truck               â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Active: [âœ“]               â”‚  â”‚   [ ] Van                 â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚   [ ] All Vehicle Types   â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Condition Logic: [AND â–¼]  â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Trigger Duration (sec):   â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚   [0_______]                â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Cooldown (minutes):       â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚   [5_______]                â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Auto Resolve: [âœ“]         â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ CONDITIONS                                                      â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ Field              â”‚ Operator  â”‚ Threshold â”‚ Actions       â”‚  â”‚
â”‚              â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
â”‚              â”‚ â”‚ [Select Field  â–¼]  â”‚ [Selectâ–¼] â”‚ [       ] â”‚ [âˆ’ Remove]    â”‚  â”‚
â”‚              â”‚ â”‚                     â”‚           â”‚           â”‚               â”‚  â”‚
â”‚              â”‚ â”‚ [+ Add Condition]                                          â”‚  â”‚
â”‚              â”‚ â”‚                                                            â”‚  â”‚
â”‚              â”‚ â”‚ Note: At least one condition is required                   â”‚  â”‚
â”‚              â”‚ â”‚       Multiple conditions are combined using logic above   â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ ACTIONS                                                         â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ [Cancel]                                          [Create] â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Guide

### API Details

#### Create Alert Rule
- **API Endpoint**: `POST /api/fleet/alert-rules/`
- **Permissions**: `IsAuthenticated` (admin users have full access, non-admin users have scoped access)

#### Request Body (JSON)
```json
{
  "name": "High Motor Temp",
  "description": "Alert when motor temp exceeds 90C",
  "severity": "high",
  "system": "motor",
  "is_active": true,
  "condition_logic": "AND",
  "trigger_duration_sec": 0,
  "cooldown_minutes": 10,
  "auto_resolve": true,
  "notification_channels": ["in_app", "email"],
  "recipients": ["ops@example.com"],
  "vehicle_types": [3,5],
  "conditions": [
    { "field": "motor_temp_c", "operator": ">", "threshold": 90 }
  ]
}
```

#### Field Requirements
- **Required Fields**:
  - `name`: String, unique name for the alert rule
  - `severity`: One of: `critical`, `high`, `medium`, `low`
  - `conditions`: At least one condition object with `field`, `operator`, and `threshold`

- **Field Validations**:
  - `notification_channels`: Must be subset of `email`, `sms`, `in_app`
  - `operators`: Must be one of `>`, `>=`, `<`, `<=`, `==`, `!=`
  - `condition_logic`: Must be either `AND` or `OR`
  - `trigger_duration_sec`: Non-negative integer
  - `cooldown_minutes`: Positive integer

### Data Sources

#### System Field Options
- Motor
- Battery
- Engine 
- Vehicle
- Fuel
- Tire
- Connectivity
- Location

#### Available Fields for Conditions
Dynamic based on system selected, common examples:
- `motor_temp_c`: Motor temperature in Celsius
- `battery_level_%`: Battery percentage
- `speed_kph`: Speed in kilometers per hour
- `voltage`: Voltage level
- `fuel_level_%`: Fuel level percentage
- `tire_pressure_kpa`: Tire pressure in kilopascals

### Interaction Flow

1. **Form Initialization**:
   - Load vehicle types from `GET /api/fleet/vehicle-types/`
   - Initialize empty form with default values

2. **Field Selection for Conditions**:
   - When user selects a system, update available fields dropdown
   - Each field may have specific operators or threshold formats

3. **Form Submission**:
   - Validate all required fields
   - Ensure at least one condition exists
   - Submit complete payload to `POST /api/fleet/alert-rules/`
   - Handle validation errors with appropriate feedback
   - On success: redirect to Alert Rule detail view

### Response Handling

- **Success (201 Created)**:
  - Response includes complete alert rule object with ID
  - Redirect to detail page for the new rule

- **Validation Error (400 Bad Request)**:
  - Display field-specific errors
  - Common errors: duplicate name, invalid notification channels, missing required fields
  - Highlight problematic fields for correction

### Notes
- Multiple conditions are combined using the specified logic (AND/OR)
- Recipients should be valid email addresses for email notifications
- Vehicle types filter which vehicles this rule applies to
