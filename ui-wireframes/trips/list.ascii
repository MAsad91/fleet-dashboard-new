```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                         â”‚
â”‚  Fleet Admin                           [Today | 10d | 30d | 90d | ğŸ“…]   [ğŸ‘¤]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE NAV     â”‚ TRIPS                                                           â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                                 â”‚
â”‚   Dashboard  â”‚ Trips                                        [+ Create] [Bulk â–¾] â”‚
â”‚              â”‚                                                                 â”‚
â”‚   Vehicles   â”‚ KPI CARDS                                                       â”‚
â”‚   Drivers    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”â”‚
â”‚   Driver Docsâ”‚ â”‚ Total Trips    â”‚ â”‚ In Progress    â”‚ â”‚ Completed      â”‚ â”‚ Avg  â”‚â”‚
â”‚ â–¶ Trips      â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚Dist. â”‚â”‚
â”‚   Telemetry  â”‚ â”‚     356        â”‚ â”‚      27        â”‚ â”‚     312        â”‚ â”‚ 45km â”‚â”‚
â”‚   Alerts     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚   Alert Rulesâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   OBD Devicesâ”‚ â”‚ Cancelled      â”‚ â”‚ Total Distance (Last 30 days)          â”‚   â”‚
â”‚   SIM Cards  â”‚ â”‚                â”‚ â”‚                                        â”‚   â”‚
â”‚   Maintenanceâ”‚ â”‚      17        â”‚ â”‚           14,325 km                    â”‚   â”‚
â”‚   Insurance  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   Dashcams   â”‚                                                                 â”‚
â”‚   Firmware   â”‚ FILTERS                                                         â”‚
â”‚   Analytics  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   Driver Logsâ”‚ â”‚ ğŸ” [Search by trip ID, vehicle, driver, etc...]            â”‚  â”‚
â”‚   Performanceâ”‚ â”‚ Status:  [All â–¾]      Date Range: [30 Days â–¾]      [Apply] â”‚  â”‚
â”‚   Settings   â”‚ â”‚                                                        â”‚  â”‚
â”‚   Users      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ TRIP METRICS                                                    â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ Distance Travelled (30 days)   â”‚ â”‚ Trip Status Breakdown  â”‚  â”‚
â”‚              â”‚ â”‚                                â”‚ â”‚                        â”‚  â”‚
â”‚              â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚              â”‚ â”‚   â”‚                         â”‚  â”‚ â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚              â”‚  â”‚
â”‚              â”‚ â”‚   â”‚   â–ˆ  â–ˆ   â–ˆ     â–ˆ        â”‚  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚              â”‚ â”‚   â”‚  â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ  â–ˆ   â–ˆ â”‚  â”‚ â”‚                        â”‚  â”‚
â”‚              â”‚ â”‚   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚  â”‚ â”‚  â€¢ Scheduled: 38      â”‚  â”‚
â”‚              â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â€¢ In Progress: 27     â”‚  â”‚
â”‚              â”‚ â”‚     S M T W T F S S M T W T F  â”‚ â”‚  â€¢ Completed: 312      â”‚  â”‚
â”‚              â”‚ â”‚                                â”‚ â”‚  â€¢ Cancelled: 17        â”‚  â”‚
â”‚              â”‚ â”‚ Total: 14,325 km               â”‚ â”‚                        â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ TRIPS TABLE                                    [â–¢ Select All]   â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ Trip ID  â”‚ Vehicle    â”‚ Driver    â”‚ Start â†’ End â”‚ Status   â”‚ â”‚
â”‚              â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-98â”‚ EV-9012    â”‚ J. Doe    â”‚ 09:30â†’12:00 â”‚in_progressâ”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-87â”‚ EV-4523    â”‚ A. Khan   â”‚ 08:15â†’10:45 â”‚completed  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-76â”‚ EV-8701    â”‚ P. Patel  â”‚ 14:00â†’16:30 â”‚completed  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-65â”‚ EV-3254    â”‚ M. Singh  â”‚ 11:30â†’13:15 â”‚cancelled  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-54â”‚ EV-7712    â”‚ S. Ali    â”‚ 09:45â†’11:30 â”‚completed  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-43â”‚ EV-5411    â”‚ R. Das    â”‚ 13:00â†’15:30 â”‚in_progressâ”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-32â”‚ EV-6623    â”‚ N. Kumar  â”‚ 10:00â†’12:30 â”‚scheduled  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-21â”‚ EV-2134    â”‚ T. Shah   â”‚ 15:30â†’17:45 â”‚completed  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-10â”‚ EV-5593    â”‚ K. Mehta  â”‚ 08:45â†’10:15 â”‚completed  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-09â”‚ EV-7284    â”‚ L. Gupta  â”‚ 12:30â†’15:00 â”‚scheduled  â”‚ â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ T-2025-08â”‚ EV-3941    â”‚ V. Sharma â”‚ 09:15â†’11:00 â”‚cancelled  â”‚ â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ ACTIONS                                                         â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ [Bulk Actions â–¾] [Export â–¾]                Page 1/5 [â—€][â–¶] â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Guide

### Data Sources

#### KPI Cards Section
- **API Endpoint**: `GET /api/fleet/trips/dashboard_stats/`
- **Query Parameters**: Apply the same filters as used in the trips list
- **Fields Used**:
  - `total_trips`
  - `in_progress_trips`
  - `completed_trips`
  - `cancelled_trips`
  - `average_distance_km`
  - `total_distance_km` (last 30 days)

#### Trip Metrics Section
- **Left Chart**: Distance traveled over time (30 days)
  - **API Endpoint**: `GET /api/fleet/trips/?status=completed&date_range=30days`
  - **Data Processing**: Aggregate `distance_travelled_km` by day
  - **X-axis**: Days
  - **Y-axis**: Total distance traveled (km)
  
- **Right Chart**: Trip status breakdown
  - **API Endpoint**: Same as KPI cards endpoint
  - **Data Processing**: Format as pie/donut chart
  - **Segments**: Scheduled, In Progress, Completed, Cancelled

#### Filters
- **Search Filter**:
  - **Query Parameter**: `search=<term>`
  - **Implementation**: Searches across trip ID, vehicle license plate, driver name, etc.
  - **UI**: Prominent search box with magnifying glass icon
  - **Note**: Use this for filtering by vehicle, driver, trip ID and other fields
  
- **Status Filter**:
  - **Query Parameter**: `status=scheduled|in_progress|completed|cancelled`
  - **Values**: All, Scheduled, In Progress, Completed, Cancelled
  - **UI**: Simple dropdown with fixed status options

- **Date Filter**:
  - **Query Parameters**: `start_date=YYYY-MM-DD&end_date=YYYY-MM-DD`
  - **Alternative**: `date_range=today|10days|30days|90days` 
  - **UI**: Dropdown with preset options for common date ranges

#### Trips Table
- **API Endpoint**: `GET /api/fleet/trips/`
- **Query Parameters**: Only using `search`, `status`, and date range parameters
- **Note**: Using only the built-in trip API parameters for better performance
- **Columns**:
  - Checkbox for selection
  - Trip ID
  - Vehicle (license plate)
  - Driver (name)
  - Start Time â†’ End Time (scheduled or actual)
  - Status

#### Bulk Actions
- **Bulk Actions Dropdown**:
  - **Cancel Selected Trips**:
    - **API**: `POST /api/fleet/trips/cancel_trips/`
    - **Request Body**: `{ "selected_trips": [ids...] }`
  - **Start Selected Trips** (for scheduled trips):
    - **API**: Multiple calls to `POST /api/fleet/trips/{id}/start/`
  - **End Selected Trips** (for in-progress trips):
    - **API**: Multiple calls to `POST /api/fleet/trips/{id}/end/`

- **Export Dropdown**:
  - **CSV**: Export to CSV format
  - **Excel**: Export to Excel format
  - **PDF**: Export to PDF format

### Vehicle Commands
When using the Command action for in-progress trips, the following options are available:
- Lock/Unlock vehicle
- Start/Stop engine
- Adjust climate control
- Flash lights/honk horn
- Send message to vehicle display
- These are sent through the `POST /api/fleet/trips/{id}/command/` endpoint with appropriate parameters.

### Interaction Flow

1. **On Page Load**:
   - Fetch dashboard stats with default/saved filters
   - Load trip metrics charts 
   - Fetch trip list with default/saved filters
   - Show relevant row action buttons based on trip status

2. **Filter Application**:
   - When user selects filters and clicks Apply:
     - Construct query with selected parameters
     - Reload dashboard stats, trip metrics, and trip list
     - Update URL parameters for shareable filtered views

3. **Table & Bulk Actions**:
   - Select multiple trips via checkboxes
   - Use Bulk Actions dropdown for operations on selected trips
   - Use Export dropdown for downloading data in various formats
   - Table pagination with prev/next buttons
