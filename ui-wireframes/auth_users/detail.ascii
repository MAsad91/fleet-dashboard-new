```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                         â”‚
â”‚  Fleet Admin > Users > User Detail                                         [ğŸ‘¤]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE NAV     â”‚ USER DETAIL                                                     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                                 â”‚
â”‚   Dashboard  â”‚ [â—€ Back]  User: sjohnson                                       â”‚
â”‚              â”‚ Sarah Johnson (Fleet Admin)   Status: Active   Last Login: 1h agoâ”‚
â”‚   Vehicles   â”‚                                                                 â”‚
â”‚   Drivers    â”‚              [Edit] [Reset Password] [Deactivate] [Delete]      â”‚
â”‚   Driver Docsâ”‚                                                                 â”‚
â”‚   Trips      â”‚ KPI CARDS                                                       â”‚
â”‚   Telemetry  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   Alerts     â”‚ â”‚ Active         â”‚ â”‚ Email Verified â”‚ â”‚ Phone Verified â”‚ â”‚Last Login    â”‚â”‚
â”‚   Alert Rulesâ”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚              â”‚â”‚
â”‚   OBD Devicesâ”‚ â”‚      âœ…        â”‚ â”‚      âœ…        â”‚ â”‚      âœ…        â”‚ â”‚  1h ago      â”‚â”‚
â”‚   SIM Cards  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚   Maintenanceâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   Insurance  â”‚ â”‚ Direct Permissions     â”‚ â”‚ Group Permissions  â”‚ â”‚ Effective Perms    â”‚â”‚
â”‚   Dashcams   â”‚ â”‚                        â”‚ â”‚                    â”‚ â”‚                    â”‚â”‚
â”‚   Firmware   â”‚ â”‚          3             â”‚ â”‚         25         â”‚ â”‚        28          â”‚â”‚
â”‚   Analytics  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚   Driver Logsâ”‚                                                                 â”‚
â”‚   Performanceâ”‚ TWO COLUMNS                                                     â”‚
â”‚   Settings   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â–¶ Users      â”‚ â”‚ User Information           â”‚  â”‚ Access & Permissions      â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Username: sjohnson        â”‚  â”‚ â€¢ Groups:                 â”‚  â”‚
â”‚   Groups &   â”‚ â”‚ â€¢ First Name: Sarah         â”‚  â”‚   - Fleet Administrators  â”‚  â”‚
â”‚   Permissionsâ”‚ â”‚ â€¢ Last Name: Johnson        â”‚  â”‚     [Remove]              â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Email: sarah@acme.com     â”‚  â”‚   - Account Managers      â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Phone: +91-9876543210     â”‚  â”‚     [Remove]              â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Role: Fleet Admin         â”‚  â”‚   [+ Add to Group]        â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Fleet: Acme Logistics     â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚   [View Fleet]              â”‚  â”‚ â€¢ Direct Permissions:     â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ City: Hyderabad           â”‚  â”‚   - Can view dashboard    â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ State: TS                 â”‚  â”‚   - Can change user       â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ PIN: 500001               â”‚  â”‚   - Can view reports      â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚   [Manage Direct Perms]   â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Status: Active            â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Created: 2023-06-15       â”‚  â”‚ â€¢ Effective Permissions:  â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Last Password Change:      â”‚  â”‚   28 total permissions   â”‚  â”‚
â”‚              â”‚ â”‚   2025-07-20               â”‚  â”‚   [View All Permissions]  â”‚  â”‚
â”‚              â”‚ â”‚                             â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â”‚ â€¢ Contact Verification:     â”‚  â”‚ â€¢ Security:               â”‚  â”‚
â”‚              â”‚ â”‚   - Email: Verified         â”‚  â”‚   [Reset Password]        â”‚  â”‚
â”‚              â”‚ â”‚     [Update Email]          â”‚  â”‚   [Toggle Two-Factor]     â”‚  â”‚
â”‚              â”‚ â”‚   - Phone: Verified         â”‚  â”‚   [Deactivate Account]    â”‚  â”‚
â”‚              â”‚ â”‚     [Update Phone]          â”‚  â”‚                           â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Guide

### Data Sources

#### User Detail
- **API Endpoint**: `GET /api/users/users/{id}/`
- **Fields Used**: Full UserSerializer including:
  - Basic: id, username, email, first_name, last_name, is_active, last_login
  - Profile: UserProfileSerializer fields (phone_number, city, state, pin, address, role, etc.)
  - Status: is_active, is_staff, is_superuser

#### Permissions Information
- **API Endpoint**: `GET /api/users/users/{id}/permissions/`
- **Fields Used**:
  - `direct_permissions`: Permissions directly assigned to the user
  - `group_permissions`: Permissions inherited from groups
  - `all_permissions`: Combined effective permissions

#### KPI Cards
- **Active Status**: From user.is_active
- **Email Verified**: From user.profile.is_email_verified
- **Phone Verified**: From user.profile.is_phone_verified
- **Last Login**: From user.last_login
- **Permissions Counts**: 
  - Direct: Count of direct_permissions array
  - Group: Count of group_permissions array
  - Effective: Count of all_permissions array

### Two-Column Layout
The user detail page follows the exact layout described in auth_users.md with two columns:

#### Left Column: User Information
- Basic user details
- Contact information
- Account status 
- Contact verification status

#### Right Column: Access & Permissions
- Groups membership with add/remove options
- Direct permissions with management option
- Effective permissions summary with view option
- Security actions

### Key Actions & API Integration

#### Groups Management
- **Add to Group**:
  - **API**: `POST /api/users/groups/{group_id}/users/`
  - **Request Body**: `{"users":[user_id], "action":"add"}`
  - **UI**: Click [+ Add to Group], select from available groups

- **Remove from Group**:
  - **API**: `POST /api/users/groups/{group_id}/users/`
  - **Request Body**: `{"users":[user_id], "action":"remove"}`
  - **UI**: Click [Remove] next to group name

#### Permissions Management
- **Manage Direct Permissions**:
  - **API**: `GET/POST /api/users/users/{id}/permissions/`
  - **UI**: Click [Manage Direct Perms] to open modal for adding/removing permissions
  
- **View All Permissions**:
  - **UI**: Click [View All Permissions] to see complete list of effective permissions
  - **Data**: Uses all_permissions array from permissions response

#### Security Actions
- **Reset Password**: `POST /api/users/forgot_password/` or `POST /api/users/set_password/`
- **Toggle Two-Factor Auth**: Admin action to enable/disable 2FA
- **Deactivate Account**: `PUT /api/users/users/{id}/` with `{"is_active": false}`

### Modals & Drawers

#### Add to Group Modal
- Select from available groups (from `GET /api/users/groups/`)
- Submit selection to add user to selected group(s)

#### Manage Direct Permissions Drawer
- Search/filter available permissions
- Multi-select permissions to assign to user
- Submit to update user's direct permissions

#### View All Permissions Modal
- Display complete list of effective permissions
- Group by application and model
- No edit functionality (view only)

### API Alignment
All endpoints referenced match the documentation in auth_users.md:
- User details: `GET /api/users/users/{id}/`
- User permissions: `GET /api/users/users/{id}/permissions/`
- Update permissions: `POST /api/users/users/{id}/permissions/`
- Group operations: `POST /api/users/groups/{group_id}/users/`
