```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                         â”‚
â”‚  Fleet Admin                           [Today | 10d | 30d | 90d | ğŸ“…]   [ğŸ‘¤]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SIDE NAV     â”‚ PERMISSIONS                                                     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                                                 â”‚
â”‚   Dashboard  â”‚ Permissions                                   [Assign to Group] â”‚
â”‚              â”‚                                                                 â”‚
â”‚   Vehicles   â”‚ KPI CARDS                                                       â”‚
â”‚   Drivers    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   Driver Docsâ”‚ â”‚ Total Perms    â”‚ â”‚ Apps           â”‚ â”‚ Models         â”‚        â”‚
â”‚   Trips      â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚        â”‚
â”‚   Telemetry  â”‚ â”‚     187        â”‚ â”‚      8         â”‚ â”‚      24        â”‚        â”‚
â”‚   Alerts     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   Alert Rulesâ”‚                                                                 â”‚
â”‚   OBD Devicesâ”‚ FILTERS                                                         â”‚
â”‚   SIM Cards  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   Maintenanceâ”‚ â”‚ ğŸ” [Search by permission name or codename...]              â”‚  â”‚
â”‚   Insurance  â”‚ â”‚ App:      [All â–¾]      Model:    [All â–¾]                   â”‚  â”‚
â”‚   Dashcams   â”‚ â”‚ Action:   [All â–¾]                             [Apply]      â”‚  â”‚
â”‚   Firmware   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   Analytics  â”‚                                                                 â”‚
â”‚   Driver Logsâ”‚ PERMISSIONS TABLE                               [â–¢ Select All]  â”‚
â”‚   Performanceâ”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   Settings   â”‚ â”‚ â–¢  â”‚ ID â”‚ Name                 â”‚ App    â”‚ Model  â”‚ Codename  â”‚â”‚
â”‚   Users      â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â–¶ Groups &   â”‚ â”‚ â–¢  â”‚ 12 â”‚ Can add vehicle      â”‚ fleet  â”‚ vehicleâ”‚add_vehicleâ”‚â”‚
â”‚   Permissionsâ”‚ â”‚ â–¢  â”‚ 13 â”‚ Can change vehicle   â”‚ fleet  â”‚ vehicleâ”‚change_veh.â”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 14 â”‚ Can delete vehicle   â”‚ fleet  â”‚ vehicleâ”‚delete_veh.â”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 15 â”‚ Can view vehicle     â”‚ fleet  â”‚ vehicleâ”‚view_vehic.â”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 21 â”‚ Can add driver       â”‚ fleet  â”‚ driver â”‚add_driver â”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 22 â”‚ Can change driver    â”‚ fleet  â”‚ driver â”‚change_drivâ”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 23 â”‚ Can delete driver    â”‚ fleet  â”‚ driver â”‚delete_drivâ”‚â”‚
â”‚              â”‚ â”‚ â–¢  â”‚ 24 â”‚ Can view driver      â”‚ fleet  â”‚ driver â”‚view_driverâ”‚â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚              â”‚                                                                 â”‚
â”‚              â”‚ ACTIONS                                                         â”‚
â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚              â”‚ â”‚ With selected: [Assign to Group â–¾]       Page 1/8 [â—€][â–¶]   â”‚  â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Implementation Guide

### Data Sources

#### KPI Cards Section
- **API Endpoint**: `GET /api/users/permissions/?page_size=1` (for count)
- **Fields Used**:
  - `count` - Total number of permissions
  - Number of distinct apps (content_type_app)
  - Number of distinct models (content_type_model)

#### Filters
- **Search Filter**:
  - **API Parameter**: `search=<term>`
  - **Implementation**: Searches permission name or codename
  
- **App Filter**:
  - **API Parameter**: `app_label=<app>`
  - **Values**: All, fleet, users, auth, etc.
  
- **Model Filter**:
  - **API Parameter**: `model=<model>`
  - **Values**: All, vehicle, driver, user, etc.
  
- **Action Filter**:
  - **Filter**: Type of action (add, change, delete, view)
  - **Implementation**: Filter by codename pattern

#### Permissions Table
- **API Endpoint**: `GET /api/users/permissions/`
- **Query Parameters**: All applied filters
- **Columns**:
  - Checkbox for selection
  - ID
  - Name
  - App (content_type_app)
  - Model (content_type_model)
  - Codename

### Actions
- **Assign to Group**:
  - **Flow**: Select permissions â†’ Click "Assign to Group" â†’ Select group
  - **API**: `POST /api/users/groups/{group_id}/permissions/`
  - **Options**: 
    - Append mode: Merge existing permissions with new ones
    - Replace mode: Overwrite existing permissions
  
- **Bulk App Permissions**:
  - **API**: `POST /api/users/groups/{id}/app-permissions/`
  - **Request Body**: `{ "app_label": "fleet", "model": "vehicle", "clear_existing": true }`

### Modal Dialogs

#### Assign to Group Modal
- **Fields**:
  - Group dropdown (populated from `GET /api/users/groups/`)
  - Mode selection (Append or Replace)
  - Submit button
  
- **Processing Logic**:
  - Append mode:
    1. Get existing permissions with `GET /api/users/groups/{gid}/permissions/`
    2. Merge existing permissions with selected ones
    3. Post the merged list
  - Replace mode: 
    - Directly post selected permissions

### API Alignment
All endpoints used in this design match the auth_users.md documentation:
- `GET /api/users/permissions/` - List permissions with filters
- `POST /api/users/groups/{id}/permissions/` - Assign permissions to group
- `POST /api/users/groups/{id}/app-permissions/` - Assign all app permissions
