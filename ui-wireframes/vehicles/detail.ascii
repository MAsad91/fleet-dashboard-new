```
┌────────────────────────────────────────────────────────────────────────────────┐
│ HEADER                                                                         │
│  Fleet Admin > Vehicles > Vehicle Detail                                   [👤]│
├──────────────┬─────────────────────────────────────────────────────────────────┤
│ SIDE NAV     │ VEHICLE DETAIL                                                  │
│──────────────│                                                                 │
│   Dashboard  │ ┌────────────────────────────────────────────────────────────┐  │
│ ▶ Vehicles   │ │ VIN: KMHC851H5NU...   Plate: EV-9012   Status: in_service  │  │
│   Drivers    │ │                                                            │  │
│   Driver Docs│ │                         [Edit] [Maintenance] [Retire] [Delete] │  │
│   Trips      │ └────────────────────────────────────────────────────────────┘  │
│   Telemetry  │                                                                 │
│   Alerts     │ KPI CARDS                                                       │
│   Alert Rules│ ┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌──────┐│
│   OBD Devices│ │ Status         │ │ Online         │ │ Battery %      │ │ Health         │ │ Miles││
│   SIM Cards  │ │                │ │                │ │                │ │                │ │      ││
│   Maintenance│ │  in_service    │ │     ●          │ │      78%       │ │     Good       │ │ 12400││
│   Insurance  │ └────────────────┘ └────────────────┘ └────────────────┘ └────────────────┘ └──────┘│
│   Dashcams   │                                                                 │
│   Firmware   │ TABBED INTERFACE                                                │
│   Analytics  │ ┌────────────────────────────────────────────────────────────┐  │
│   Driver Logs│ │ [Overview] [Telemetry] [History] [OBD Device] [SIM Card] [Dashcam] │
│   Performance│ ├────────────────────────────────────────────────────────────┤  │
{{ ... }}
│   Settings   │ │                                                            │  │
│   Users      │ │ OVERVIEW TAB                                               │  │
│              │ │ ┌────────────────────────────────────────────────────────┐ │  │
│              │ │ │ VEHICLE INFORMATION                                    │ │  │
│              │ │ │ • Vehicle Type: SUV (ID: 3) [View Type]                │ │  │
│              │ │ │ • VIN: KMHC851H5NU123456                               │ │  │
│              │ │ │ • License Plate: EV-9012                               │ │  │
│              │ │ │ • Make: Tesla                                          │ │  │
│              │ │ │ • Model: Model Y                                        │ │  │
│              │ │ │ • Year: 2023                                           │ │  │
│              │ │ │ • Status: in_service                                   │ │  │
│              │ │ │ • Health: Good                                         │ │  │
│              │ │ │ • Color: Blue                                          │ │  │
│              │ │ │ • Seating Capacity: 5                                  │ │  │
│              │ │ │ • Fuel Type: Electric                                  │ │  │
│              │ │ │ • Transmission: Automatic                              │ │  │
│              │ │ │ • Battery Capacity: 75 kWh                             │ │  │
│              │ │ │ • Efficiency: 6.2 km/kWh                               │ │  │
│              │ │ │ • Warranty Expiry: 2026-10-15                          │ │  │
│              │ │ │ • Alerts Enabled: Yes                                  │ │  │
│              │ │ │ • OTA Updates: No                                      │ │  │
│              │ │ └────────────────────────────────────────────────────────┘ │  │
│              │ │                                                            │  │
│              │ │ LOCATION MAP                                               │  │
│              │ │ ┌────────────────────────────────────────────────────────┐ │  │
│              │ │ │                                                        │ │  │
│              │ │ │                                                        │ │  │
│              │ │ │                   (Map View)                           │ │  │
│              │ │ │                                                        │ │  │
│              │ │ │                                                        │ │  │
│              │ │ └────────────────────────────────────────────────────────┘ │  │
│              │ │                                                            │  │
│              │ │ RECENT ALERTS                                              │  │
│              │ │ ┌────────────────────────────────────────────────────────┐ │  │
│              │ │ │ ■ High: Battery temperature above threshold (2h ago)   │ │  │
│              │ │ │ ■ Medium: Tire pressure low - rear right (5h ago)      │ │  │
│              │ │ │ ■ Low: Software update available (1d ago)              │ │  │
│              │ │ │                                          [View All]    │ │  │
│              │ │ └────────────────────────────────────────────────────────┘ │  │
│              │ │                                                            │  │
│              │ └────────────────────────────────────────────────────────────┘  │
│              │                                                                 │
└──────────────┴─────────────────────────────────────────────────────────────────┘
```

## Tabbed Pages Detail (Modified)

### Telemetry Tab (Simplified)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ VEHICLE TELEMETRY - Tesla Model Y (EV-9012)          [View Full Telemetry →]│
├─────────────────────────────────────────────────────────────────────────────┤
│ CURRENT READINGS                                      Last updated: 5m ago  │
│ ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐                │
│ │ Speed      │ │ Battery %  │ │ Range      │ │ Motor Temp │                │
│ │ 54 kph     │ │ 78%        │ │ 312 km     │ │ 76.8°C     │                │
│ └────────────┘ └────────────┘ └────────────┘ └────────────┘                │
├─────────────────────────────────────────────────────────────────────────────┤
│ QUICK CHART (Last Hour)                              [Speed ▾] [Battery ▾] │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                                                                         │ │
│ │                    ▁▂▃▅▆▇▆▅▃▂▁▃▅▇█▇▅▃                                  │ │
│ │                                                                         │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ Latest telemetry readings for EV-9012. For full analysis and history:        │
│ ┌────────────────────────────────────────────────────────────────────────┐  │
│ │             [View Full Telemetry for this Vehicle]                     │  │
│ └────────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```


### OBD Device Tab (Simplified)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ OBD DEVICE TAB                                     [View OBD Device Detail →] │
├─────────────────────────────────────────────────────────────────────────────┤
│ DEVICE SUMMARY                                                             │
│ ┌─────────────────────────────────┐  ┌─────────────────────────────────┐   │
│ │                                 │  │                                 │   │
│ │ • Device ID: OBD-123            │  │ • Status: Active               │   │
│ │ • Model: TelemX T2              │  │ • Last Communication: 5m ago   │   │
│ │ • Firmware: v1.2.3              │  │ • Signal Strength: Good        │   │
│ │   (v1.3.0 available)            │  │ • Uptime: 73 days              │   │
│ │                                 │  │                                 │   │
│ │                                 │  │                                 │   │
│ │ [Configure Device]              │  │ [Update Firmware]              │   │
│ │                                 │  │                                 │   │
│ └─────────────────────────────────┘  └─────────────────────────────────┘   │
│                                                                            │
│ For full device management including configuration settings, update history, │
│ and detailed diagnostics, click "View OBD Device Detail"                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

### SIM Card Tab (Simplified)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ SIM CARD TAB                                       [View SIM Card Detail →]  │
├─────────────────────────────────────────────────────────────────────────────┤
│ SIM SUMMARY                                                                │
│ ┌─────────────────────────────────┐  ┌─────────────────────────────────┐   │
│ │                                 │  │                                 │   │
│ │ • SIM ID: SIM-456               │  │ • Status: Active               │   │
│ │ • ICCID: 89990... (truncated)   │  │ • Network: Airtel              │   │
│ │ • Associated Device: OBD-123    │  │ • Signal: Good                 │   │
│ │                                 │  │ • Last Activity: 5m ago        │   │
│ │                                 │  │                                 │   │
│ │                                 │  │                                 │   │
│ │ [Change Plan]                   │  │ [Usage: 2.3GB/5GB (46%)]       │   │
│ │                                 │  │                                 │   │
│ └─────────────────────────────────┘  └─────────────────────────────────┘   │
│                                                                            │
│ For detailed usage history, plan management, and billing information,      │
│ click "View SIM Card Detail"                                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Dashcam Tab (Simplified)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ DASHCAM TAB                                       [View Dashcam Detail →]   │
├─────────────────────────────────────────────────────────────────────────────┤
│ DASHCAM SUMMARY                                                            │
│ ┌─────────────────────────────────┐  ┌─────────────────────────────────┐   │
│ │                                 │  │                                 │   │
│ │ • Device ID: DASH-789           │  │ • Status: Active               │   │
│ │ • Model: VisionPro D3           │  │ • Last Stream: 1h ago          │   │
│ │ • Firmware: v2.1.0              │  │ • Storage: 64GB (43% used)     │   │
│ │                                 │  │ • Recording: Continuous        │   │
│ │                                 │  │                                 │   │
│ └─────────────────────────────────┘  └─────────────────────────────────┘   │
│                                                                            │
│ LATEST RECORDING                                                          │
│ ┌────────────────────────────────────────────────────────────────────────┐ │
│ │                                                                        │ │
│ │           [Thumbnail of most recent recording]                         │ │
│ │                                                                        │ │
│ │  2023-09-25 15:30:22  (5m 23s)                      [View] [Download] │ │
│ │                                                                        │ │
│ └────────────────────────────────────────────────────────────────────────┘ │
│                                                                            │
│ For complete recordings library, live streaming and device management,     │
│ click "View Dashcam Detail"                                                │
└─────────────────────────────────────────────────────────────────────────────┘
```
### History Tab (Comprehensive)
```
┌─────────────────────────────────────────────────────────────────────────────┐
│ HISTORY TAB                                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│ FILTERS: [Range ▾ today|10d|30d|90d] [Start Date] [End Date]    (Apply)    │
│ Notes: Date range affects all charts and metrics below                      │
│                                                                             │
│ PERFORMANCE METRICS                                                        │
│ ┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌────────────────┐│
│ │ Total Trips    │ │ Distance       │ │ Energy Used    │ │ Max Speed     ││
│ │                │ │                │ │                │ │                ││
│ │      24        │ │   1,284 km     │ │   205 kWh      │ │    94 kph      ││
│ └────────────────┘ └────────────────┘ └────────────────┘ └────────────────┘│
│ ┌────────────────┐ ┌────────────────┐                                      │
│ │ Avg Battery %  │ │ Error Records  │                                      │
│ │                │ │                │                                      │
│ │     68%        │ │       3        │                                      │
│ └────────────────┘ └────────────────┘                                      │
│                                                                             │
│ ENERGY BREAKDOWN                                                           │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                                                                         │ │
│ │  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  ▒▒▒▒▒▒▒▒  ░░░░                                  │ │
│ │  Driving (68%)          Charging (25%)   Idle (7%)                     │ │
│ │                                                                         │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ TIME SERIES CHARTS                                                         │
│ ┌────────────────────────────────────────────────────────────────────────┐  │
│ │ VISUALIZATION: [Speed ▾] [Sampling: 100 points ▾] [Raw Data ☐]         │  │
│ │  Options: Speed, Battery %, Range, Motor Temp, Power, Tire Pressure, Torque│
│ └────────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │                                                                         │ │
│ │  ▁▂▃▅▆▇▆▅▃▂▁▃▅▇█▇▅▃▁▂▃▅▆▇▆▅▃▂▁▃▅▇█▇▅▃▁▂▃▅▆▇▆▅▃▂▁▃▅▇█▇▅▃             │ │
│ │                                                                         │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ TRIPS SUMMARY                                                              │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ Date       │ Start → End   │ Distance │ Avg Speed │ Energy Used        │ │
│ │ ─────────── │ ───────────── │ ──────── │ ───────── │ ──────────────     │ │
│ │ 2025-09-25 │ 10:15→12:30   │ 65 km    │ 42 kph    │ 8.2 kWh           │ │
│ │ 2025-09-24 │ 08:45→11:15   │ 89 km    │ 36 kph    │ 12.5 kWh          │ │
│ │ 2025-09-22 │ 14:30→16:45   │ 72 km    │ 45 kph    │ 9.8 kWh           │ │
│ │                                                                         │ │
│ │ [View All Trips]                                                       │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ MAINTENANCE SUMMARY                                                        │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ Date       │ Service Type   │ Status    │ Cost                         │ │
│ │ ─────────── │ ───────────── │ ──────── │ ───────────                   │ │
│ │ 2025-08-15 │ Brake Service  │ Completed │ ₹3,500                       │ │
│ │ 2025-06-10 │ Full Inspection│ Completed │ ₹2,800                       │ │
│ │ 2025-03-22 │ Tire Rotation  │ Completed │ ₹1,200                       │ │
│ │                                                                         │ │
│ │ [View Maintenance Records]                                             │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ TELEMETRY STATS                                                             │
│ ┌─────────────────────────────────────────────────────────────────────────┐ │
│ │ • Speed: Avg 48 kph, Min 0 kph, Max 94 kph                             │ │
│ │ • Battery: Avg 68%, Min 35%, Max 100%                                  │ │
│ │ • Motor Temp: Avg 65°C, Min 32°C, Max 82°C                             │ │
│ │ • Range: Avg 278 km, Min 120 km, Max 405 km                            │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Implementation Guide

### API Endpoints

#### Main Vehicle Detail API
- **Endpoint**: `GET /api/fleet/vehicles/{id}/`
- **Response Format**: `{ "vehicle": {...}, "latest_obd": {...}, "recent_alerts": [...] }`
- **Authentication**: Requires token, scoped by fleet operator
- **Description**: Returns comprehensive vehicle details including latest telemetry data and recent alerts

#### KPI Cards Data Source
- **API Endpoint**: `GET /api/fleet/vehicles/{id}/` (same as main vehicle detail API)
- **Data Mapping for KPI Cards**:
  - **Status**: `vehicle.status` ("available", "in_service", "maintenance", "retired")
  - **Online**: `vehicle.online_status` ("online" or "offline") 
    - Display filled circle (●) when online, empty circle (○) when offline 
  - **Battery %**: `vehicle.current_battery_level` (displays percentage value directly)
  - **Health**: `vehicle.health_status` ("Good", "Warning", "Critical")
  - **Mileage**: `vehicle.mileage_km` (displays kilometers value directly)
- **Notes**: All KPI card data is available in the main vehicle detail response

#### Tab-Specific APIs

##### Overview Tab
- **Vehicle Data**: Already included in main vehicle detail API
- **Location Map Data**: Uses `vehicle.last_known_location` or `vehicle.latitude`/`vehicle.longitude`
- **Recent Alerts**: Already included in main vehicle detail API as `recent_alerts`
  - **Additional Alerts API**: `GET /api/fleet/alerts/?vehicle={id}&status=active&limit=10`

##### Telemetry Tab
- **Latest OBD Data**: Already included in main vehicle detail API as `latest_obd`
- **Recent Telemetry (Chart)**: `GET /api/fleet/vehicles/{id}/telemetry_data/`
  - **Response Format**: `{ "speed_data": [...], "battery_data": [...], "coords_data": [...] }`
  - **Parameters**: `brief=true` for simplified dataset
  - **Default**: Returns last 20 data points for this specific vehicle (newest first)
- **View Full Telemetry Button**: 
  - **Navigation**: Routes to Telemetry Explorer with vehicle filter pre-applied
  - **Target URL**: `/api/fleet/obd-telemetry/?vehicle={id}`
  - **Implementation**: Ensures that only telemetry for the current vehicle is displayed

##### OBD Device Tab
- **Device Summary**: `GET /api/fleet/obd-devices/?vehicle={id}&brief=true`
- **Detailed Device View**: `GET /api/fleet/obd-devices/{obd_id}/`

##### SIM Card Tab
- **SIM Card Summary**: `GET /api/fleet/sim-cards/?device={obd_device_id}&brief=true`
- **Detailed SIM View**: `GET /api/fleet/sim-cards/{sim_id}/`

##### Dashcam Tab
- **Dashcam Summary**: `GET /api/fleet/dashcams/?vehicle={id}&brief=true`
- **Latest Recording**: `GET /api/fleet/video-segments/?dashcam={dashcam_id}&latest=true`
- **Full Recordings**: `GET /api/fleet/video-segments/?dashcam={dashcam_id}`

##### History Tab
- **Performance Metrics & Charts**: `GET /api/fleet/history/vehicle/{id}/`
  - **Parameters**:
    - `date_range=today|10days|30days|90days` or
    - `start_date=YYYY-MM-DD&end_date=YYYY-MM-DD`
    - `include_details=true`: Include detailed statistics
    - `include_raw=true`: Include raw telemetry records
    - `visualization=all|speed|battery_level|range|power|tire_pressure|torque`
    - `max_points=<number>`: Sampling control (default 100)
- **Energy Breakdown**: `GET /api/fleet/history/vehicle/{id}/energy_breakdown/`

#### Action APIs
- **Set for Maintenance**: `PATCH /api/fleet/vehicles/{id}/` with `{ "status": "maintenance" }`
  - **Bulk Action**: `POST /api/fleet/vehicles/set_for_maintenance/` with `{ "selected_vehicles": [ids...] }`
- **Retire Vehicle**: `PATCH /api/fleet/vehicles/{id}/` with `{ "status": "retired" }`
  - **Bulk Action**: `POST /api/fleet/vehicles/retire_vehicles/` with `{ "selected_vehicles": [ids...] }`
- **Delete Vehicle**: `DELETE /api/fleet/vehicles/{id}/`

#### Related Vehicle Type APIs
- **Vehicle Type Details**: `GET /api/fleet/vehicle-types/{vehicle_type_id}/`
- **Alert Thresholds**: `GET /api/fleet/vehicle-types/{vehicle_type_id}/alert-thresholds/`
- **Firmware Lineage**: `GET /api/fleet/vehicle-types/{vehicle_type_id}/firmware-lineage/`
- **Vehicle Type Documents**: `GET /api/fleet/vehicle-types/{vehicle_type_id}/documents/`
- **Other Vehicles of Same Type**: `GET /api/fleet/vehicle-types/{vehicle_type_id}/active-vehicles/`

### Response Structure

#### Main Vehicle Detail Response
```json
{
  "vehicle": {
    "id": 123,
    "vin": "KMHC851H5NU123456",
    "license_plate": "EV-9012",
    "vehicle_type": "SUV",              // Category string
    "vehicle_type_id": 3,              // ID for related lookups
    "fleet_operator": 2,
    "make": "Tesla",
    "model": "Model Y",
    "year": 2023,
    "status": "in_service",
    "health_status": "Good",
    "online_status": "online",
    "battery_capacity_kwh": 75.0,
    "current_battery_level": 78.0,
    "mileage_km": 12400,
    "last_known_location": {"type": "Point", "coordinates": [78.47258, 17.40406]},
    "latitude": 17.40406,
    "longitude": 78.47258,
    "alerts_enabled": true,
    "ota_enabled": false,
    "color": "Blue",
    "efficiency_km_per_kwh": 6.2,
    "alerts_summary": {
      "WARNINGS": ["Battery temperature above threshold"],
      "ERRORS": []
    }
  },
  "latest_obd": {
    "id": 456,
    "trip": 789,
    "timestamp": "2025-09-26T13:30:45+05:30",
    "coordinates": {"type": "Point", "coordinates": [78.47258, 17.40406]},
    "latitude": 17.40406,
    "longitude": 78.47258,
    "speed_kph": 54,
    "battery_level_percent": 78,
    "motor_temp_c": 76.8,
    "range_km": 312
    // Additional fields omitted for brevity
  },
  "recent_alerts": [
    {
      "id": 987,
      "alert_type": "temperature",
      "system": "battery",
      "title": "Battery temperature above threshold",
      "severity": "high",
      "created_at": "2025-09-26T11:45:22+05:30",
      "status_label": "New"
      // Additional fields omitted for brevity
    },
    // Additional alerts omitted for brevity
  ]
}
```

### Interaction Flow

1. **Load Vehicle Detail**:
   - Call `GET /api/fleet/vehicles/{id}/`
   - Populate overview tab with vehicle info, map, and alerts

2. **Tab Navigation**:
   - **Overview**: Use data from main API response
   - **Telemetry**: 
     - Load telemetry data for this specific vehicle when tab is opened
     - Use the vehicle ID from the current detail page in all telemetry API calls
     - "View Full Telemetry" button navigates to telemetry explorer with vehicle={id} filter pre-applied
   - **History**: Load history with default 30-day range for this vehicle when tab is opened
   - **OBD Device**: Load OBD device details for this vehicle when tab is opened
   - **SIM Card**: Load SIM card details for this vehicle's OBD device when tab is opened
   - **Dashcam**: Load dashcam details and latest recording for this vehicle when tab is opened

3. **History Tab Interactions**:
   - When user changes date range, reload with selected parameters
   - When user changes visualization, update chart without reloading full dataset
   - When user requests raw data, fetch with `include_raw=true`

4. **Actions**:
   - Edit: Navigate to vehicle edit form
   - Maintenance: Send PATCH request to change status
   - Retire: Send PATCH request to change status
   - Delete: Send DELETE request after confirmation
